<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Scrabble Roto</title>
    <link>//localhost:1313/</link>
    <description>Recent content on Scrabble Roto</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 19 Jul 2025 21:01:46 -0400</lastBuildDate>
    <atom:link href="//localhost:1313/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Admin Panel</title>
      <link>//localhost:1313/admin/</link>
      <pubDate>Sat, 19 Jul 2025 21:01:46 -0400</pubDate>
      <guid>//localhost:1313/admin/</guid>
      <description>&lt;div id=&#34;adminContainer&#34;&gt;&#xD;&#xA;    &lt;div id=&#34;adminTabs&#34;&gt;&#xD;&#xA;        &lt;button class=&#34;tab-btn active&#34; onclick=&#34;showTab(&#39;events&#39;)&#34;&gt;Events &amp; Rating Bands&lt;/button&gt;&#xD;&#xA;        &lt;button class=&#34;tab-btn&#34; onclick=&#34;showTab(&#39;players&#39;)&#34;&gt;Players&lt;/button&gt;&#xD;&#xA;        &lt;button class=&#34;tab-btn&#34; onclick=&#34;showTab(&#39;teams&#39;)&#34;&gt;Teams&lt;/button&gt;&#xD;&#xA;        &lt;button class=&#34;tab-btn&#34; onclick=&#34;showTab(&#39;users&#39;)&#34;&gt;Users&lt;/button&gt;&#xD;&#xA;    &lt;/div&gt;&#xD;&#xA;&#xD;&#xA;    &lt;!-- Events &amp; Rating Bands Tab --&gt;&#xD;&#xA;    &lt;div id=&#34;eventsTab&#34; class=&#34;tab-content active&#34;&gt;&#xD;&#xA;        &lt;h2&gt;Events Management&lt;/h2&gt;&#xD;&#xA;        &#xD;&#xA;        &lt;div class=&#34;section&#34;&gt;&#xD;&#xA;            &lt;h3&gt;Create New Event&lt;/h3&gt;&#xD;&#xA;            &lt;form id=&#34;eventForm&#34;&gt;&#xD;&#xA;                &lt;div class=&#34;form-row&#34;&gt;&#xD;&#xA;                    &lt;input type=&#34;text&#34; id=&#34;eventName&#34; placeholder=&#34;Event Name&#34; required&gt;&#xD;&#xA;                    &lt;input type=&#34;text&#34; id=&#34;eventDescription&#34; placeholder=&#34;Description&#34;&gt;&#xD;&#xA;                &lt;/div&gt;&#xD;&#xA;                &lt;div class=&#34;form-row&#34;&gt;&#xD;&#xA;                    &lt;input type=&#34;date&#34; id=&#34;eventStartDate&#34;&gt;&#xD;&#xA;                    &lt;input type=&#34;date&#34; id=&#34;eventEndDate&#34;&gt;&#xD;&#xA;                &lt;/div&gt;&#xD;&#xA;                &lt;div class=&#34;form-row&#34;&gt;&#xD;&#xA;                    &lt;label for=&#34;eventTeamDeadline&#34; style=&#34;display: flex; align-items: center; gap: 0.5rem;&#34;&gt;&#xD;&#xA;                        Team Deadline (optional):&#xD;&#xA;                        &lt;input type=&#34;datetime-local&#34; id=&#34;eventTeamDeadline&#34; style=&#34;flex: 1;&#34;&gt;&#xD;&#xA;                    &lt;/label&gt;&#xD;&#xA;                    &lt;small style=&#34;color: #666; margin-left: 0.5rem;&#34;&gt;Your timezone: &lt;span id=&#34;createTimezone&#34;&gt;&lt;/span&gt;&lt;/small&gt;&#xD;&#xA;                &lt;/div&gt;&#xD;&#xA;                &lt;button type=&#34;submit&#34;&gt;Create Event&lt;/button&gt;&#xD;&#xA;            &lt;/form&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;&#xD;&#xA;        &lt;div class=&#34;section&#34;&gt;&#xD;&#xA;            &lt;h3&gt;Event Deadline Status&lt;/h3&gt;&#xD;&#xA;            &lt;button onclick=&#34;loadEventDeadlines()&#34;&gt;Check Deadlines&lt;/button&gt;&#xD;&#xA;            &lt;div id=&#34;eventDeadlinesContainer&#34;&gt;&#xD;&#xA;                &lt;p&gt;Click &#34;Check Deadlines&#34; to view team creation status&lt;/p&gt;&#xD;&#xA;            &lt;/div&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;&#xD;&#xA;        &lt;div class=&#34;section&#34;&gt;&#xD;&#xA;            &lt;h3&gt;Edit Event Deadlines&lt;/h3&gt;&#xD;&#xA;            &lt;div class=&#34;form-row&#34;&gt;&#xD;&#xA;                &lt;select id=&#34;deadlineEventSelect&#34;&gt;&#xD;&#xA;                    &lt;option value=&#34;&#34;&gt;Select Event to Edit Deadline...&lt;/option&gt;&#xD;&#xA;                &lt;/select&gt;&#xD;&#xA;                &lt;button onclick=&#34;loadEventForDeadlineEdit()&#34;&gt;Edit Deadline&lt;/button&gt;&#xD;&#xA;            &lt;/div&gt;&#xD;&#xA;            &lt;div id=&#34;deadlineEditContainer&#34; style=&#34;display: none;&#34;&gt;&#xD;&#xA;                &lt;form id=&#34;deadlineEditForm&#34;&gt;&#xD;&#xA;                    &lt;div class=&#34;form-row&#34;&gt;&#xD;&#xA;                        &lt;label for=&#34;editEventDeadline&#34; style=&#34;display: flex; align-items: center; gap: 0.5rem;&#34;&gt;&#xD;&#xA;                            Team Deadline:&#xD;&#xA;                            &lt;input type=&#34;datetime-local&#34; id=&#34;editEventDeadline&#34; style=&#34;flex: 1;&#34;&gt;&#xD;&#xA;                        &lt;/label&gt;&#xD;&#xA;                        &lt;small style=&#34;color: #666; margin-left: 0.5rem;&#34;&gt;Your timezone: &lt;span id=&#34;editTimezone&#34;&gt;&lt;/span&gt;&lt;/small&gt;&#xD;&#xA;                    &lt;/div&gt;&#xD;&#xA;                    &lt;div class=&#34;form-row&#34;&gt;&#xD;&#xA;                        &lt;button type=&#34;submit&#34;&gt;Update Deadline&lt;/button&gt;&#xD;&#xA;                        &lt;button type=&#34;button&#34; onclick=&#34;clearDeadline()&#34;&gt;Clear Deadline&lt;/button&gt;&#xD;&#xA;                        &lt;button type=&#34;button&#34; onclick=&#34;cancelDeadlineEdit()&#34;&gt;Cancel&lt;/button&gt;&#xD;&#xA;                    &lt;/div&gt;&#xD;&#xA;                &lt;/form&gt;&#xD;&#xA;            &lt;/div&gt;&#xD;&#xA;        &lt;/div&gt;&#xD;&#xA;&#xD;&#xA;        &lt;div class=&#34;section&#34;&gt;&#xD;&#xA;            &lt;h3&gt;Rating Bands&lt;/h3&gt;&#xD;&#xA;            &lt;div class=&#34;form-row&#34;&gt;&#xD;&#xA;                &lt;select id=&#34;eventSelect&#34;&gt;&#xD;&#xA;                    &lt;option value=&#34;&#34;&gt;Select Event...&lt;/option&gt;&#xD;&#xA;                &lt;/select&gt;&#xD;&#xA;                &lt;button onclick=&#34;loadRatingBands()&#34;&gt;Load Bands&lt;/button&gt;&#xD;&#xA;            &lt;/div&gt;&#xD;&#xA;            &#xD;&#xA;            &lt;div id=&#34;ratingBandsContainer&#34;&gt;&#xD;&#xA;                &lt;p&gt;Select an event to manage rating bands&lt;/p&gt;</description>
    </item>
    <item>
      <title>Create Team</title>
      <link>//localhost:1313/create-team/</link>
      <pubDate>Sat, 19 Jul 2025 18:47:33 -0400</pubDate>
      <guid>//localhost:1313/create-team/</guid>
      <description>&lt;h1&gt;Create Your Team&lt;/h1&gt;&#xD;&#xA;&#xD;&#xA;&lt;div id=&#34;createTeamContainer&#34;&gt;&#xD;&#xA;  &lt;form id=&#34;teamForm&#34;&gt;&#xD;&#xA;    &lt;div class=&#34;form-group&#34;&gt;&#xD;&#xA;      &lt;label for=&#34;teamName&#34;&gt;Team Name:&lt;/label&gt;&#xD;&#xA;      &lt;input type=&#34;text&#34; id=&#34;teamName&#34; required /&gt;&#xD;&#xA;    &lt;/div&gt;&#xD;&#xA;&#xD;&#xA;    &lt;div class=&#34;form-group&#34;&gt;&#xD;&#xA;      &lt;label for=&#34;eventSelect&#34;&gt;Event:&lt;/label&gt;&#xD;&#xA;      &lt;select id=&#34;eventSelect&#34; required&gt;&#xD;&#xA;        &lt;option value=&#34;&#34;&gt;Select an event...&lt;/option&gt;&#xD;&#xA;      &lt;/select&gt;&#xD;&#xA;    &lt;/div&gt;&#xD;&#xA;&#xD;&#xA;    &lt;div id=&#34;playerSelections&#34;&gt;&lt;/div&gt;&#xD;&#xA;&#xD;&#xA;    &lt;div id=&#34;teamError&#34; class=&#34;error-message&#34; style=&#34;display: none&#34;&gt;&lt;/div&gt;&#xD;&#xA;    &lt;button type=&#34;submit&#34;&gt;Create Team&lt;/button&gt;&#xD;&#xA;  &lt;/form&gt;&#xD;&#xA;&lt;/div&gt;&#xD;&#xA;&#xD;&#xA;&lt;script&gt;&#xD;&#xA;  document.addEventListener(&#34;DOMContentLoaded&#34;, async function () {&#xD;&#xA;    if (!(await requireAuth())) return;&#xD;&#xA;&#xD;&#xA;    loadEvents();&#xD;&#xA;&#xD;&#xA;    document&#xD;&#xA;      .getElementById(&#34;eventSelect&#34;)&#xD;&#xA;      .addEventListener(&#34;change&#34;, function () {&#xD;&#xA;        loadRatingBands();&#xD;&#xA;        updateSubmitButton();&#xD;&#xA;      });&#xD;&#xA;    document.getElementById(&#34;teamForm&#34;).addEventListener(&#34;submit&#34;, createTeam);&#xD;&#xA;&#xD;&#xA;    // Initially disable submit button&#xD;&#xA;    updateSubmitButton();&#xD;&#xA;  });&#xD;&#xA;&#xD;&#xA;  async function loadEvents() {&#xD;&#xA;    try {&#xD;&#xA;      // Check if current user is admin&#xD;&#xA;      const { data: profile } = await supabase&#xD;&#xA;        .from(&#34;profiles&#34;)&#xD;&#xA;        .select(&#34;is_admin&#34;)&#xD;&#xA;        .eq(&#34;id&#34;, currentUser.id)&#xD;&#xA;        .single();&#xD;&#xA;      &#xD;&#xA;      const isAdmin = profile?.is_admin || false;&#xD;&#xA;&#xD;&#xA;      const { data: events, error } = await supabase&#xD;&#xA;        .from(&#34;event_deadline_status&#34;)&#xD;&#xA;        .select(&#34;*&#34;)&#xD;&#xA;        .eq(&#34;is_active&#34;, true)&#xD;&#xA;        .order(&#34;start_date&#34;, { ascending: false });&#xD;&#xA;&#xD;&#xA;      if (error) throw error;&#xD;&#xA;&#xD;&#xA;      const select = document.getElementById(&#34;eventSelect&#34;);&#xD;&#xA;      events.forEach((event, index) =&gt; {&#xD;&#xA;        const option = document.createElement(&#34;option&#34;);&#xD;&#xA;        option.value = event.id;&#xD;&#xA;        option.textContent = `${event.name} ${!event.teams_allowed &amp;&amp; !isAdmin ? &#39;(CLOSED)&#39; : &#39;&#39;}`;&#xD;&#xA;        option.disabled = !event.teams_allowed &amp;&amp; !isAdmin;&#xD;&#xA;        select.appendChild(option);&#xD;&#xA;      });&#xD;&#xA;&#xD;&#xA;      // Auto-select the latest event (open for users, any for admins)&#xD;&#xA;      const availableEvent = isAdmin &#xD;&#xA;        ? events[0] &#xD;&#xA;        : events.find(e =&gt; e.teams_allowed);&#xD;&#xA;        &#xD;&#xA;      if (availableEvent) {&#xD;&#xA;        select.value = availableEvent.id;&#xD;&#xA;        await loadRatingBands();&#xD;&#xA;        updateSubmitButton();&#xD;&#xA;      } else if (events.length &gt; 0 &amp;&amp; !isAdmin) {&#xD;&#xA;        // Show deadline message if no events are open for non-admins&#xD;&#xA;        showDeadlineMessage(events[0]);&#xD;&#xA;      }&#xD;&#xA;    } catch (error) {&#xD;&#xA;      console.error(&#34;Error loading events:&#34;, error);&#xD;&#xA;    }&#xD;&#xA;  }&#xD;&#xA;&#xD;&#xA;  async function loadRatingBands() {&#xD;&#xA;    const eventId = document.getElementById(&#34;eventSelect&#34;).value;&#xD;&#xA;    if (!eventId) return;&#xD;&#xA;&#xD;&#xA;    try {&#xD;&#xA;      const { data: bands, error } = await supabase&#xD;&#xA;        .from(&#34;rating_bands&#34;)&#xD;&#xA;        .select(&#34;*&#34;)&#xD;&#xA;        .eq(&#34;event_id&#34;, eventId)&#xD;&#xA;        .order(&#34;id&#34;, { ascending: true });&#xD;&#xA;&#xD;&#xA;      if (error) throw error;&#xD;&#xA;&#xD;&#xA;      await createPlayerSelections(bands, eventId);&#xD;&#xA;    } catch (error) {&#xD;&#xA;      console.error(&#34;Error loading rating bands:&#34;, error);&#xD;&#xA;    }&#xD;&#xA;  }&#xD;&#xA;&#xD;&#xA;  async function createPlayerSelections(bands, eventId) {&#xD;&#xA;    const container = document.getElementById(&#34;playerSelections&#34;);&#xD;&#xA;    container.innerHTML = &#34;&#34;;&#xD;&#xA;&#xD;&#xA;    for (const band of bands) {&#xD;&#xA;      const { data: players, error } = await supabase&#xD;&#xA;        .from(&#34;players&#34;)&#xD;&#xA;        .select(&#34;*&#34;)&#xD;&#xA;        .eq(&#34;event_id&#34;, eventId)&#xD;&#xA;        .eq(&#34;current_rating_band_id&#34;, band.id)&#xD;&#xA;        .eq(&#34;is_active&#34;, true)&#xD;&#xA;        .eq(&#34;dropped_out&#34;, false)&#xD;&#xA;        .order(&#34;current_rating&#34;, { ascending: false });&#xD;&#xA;&#xD;&#xA;      if (error) {&#xD;&#xA;        console.error(&#34;Error loading players for band:&#34;, band.name, error);&#xD;&#xA;        continue;&#xD;&#xA;      }&#xD;&#xA;&#xD;&#xA;      const div = document.createElement(&#34;div&#34;);&#xD;&#xA;      div.className = &#34;rating-band-selection&#34;;&#xD;&#xA;      div.setAttribute(&#34;data-band-id&#34;, band.id);&#xD;&#xA;      div.innerHTML = `&#xD;&#xA;            &lt;h3&gt;${band.name}&lt;/h3&gt;&#xD;&#xA;            &lt;select name=&#34;player-${band.id}&#34; required&gt;&#xD;&#xA;                &lt;option value=&#34;&#34;&gt;Select a player...&lt;/option&gt;&#xD;&#xA;                ${players&#xD;&#xA;                  .map(&#xD;&#xA;                    (player) =&gt;&#xD;&#xA;                      `&lt;option value=&#34;${player.id}&#34;&gt;${player.name} (${player.current_rating})&lt;/option&gt;`&#xD;&#xA;                  )&#xD;&#xA;                  .join(&#34;&#34;)}&#xD;&#xA;            &lt;/select&gt;&#xD;&#xA;        `;&#xD;&#xA;&#xD;&#xA;      // Add change listener for visual feedback&#xD;&#xA;      const select = div.querySelector(&#34;select&#34;);&#xD;&#xA;      select.addEventListener(&#34;change&#34;, function () {&#xD;&#xA;        updateBandStatus(div, this.value);&#xD;&#xA;        updateSubmitButton();&#xD;&#xA;      });&#xD;&#xA;&#xD;&#xA;      container.appendChild(div);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    // Initially disable submit button&#xD;&#xA;    updateSubmitButton();&#xD;&#xA;  }&#xD;&#xA;&#xD;&#xA;  function updateBandStatus(bandDiv, selectedValue) {&#xD;&#xA;    if (selectedValue) {&#xD;&#xA;      bandDiv.classList.remove(&#34;invalid&#34;);&#xD;&#xA;      bandDiv.classList.add(&#34;completed&#34;);&#xD;&#xA;    } else {&#xD;&#xA;      bandDiv.classList.remove(&#34;completed&#34;);&#xD;&#xA;      bandDiv.classList.remove(&#34;invalid&#34;);&#xD;&#xA;    }&#xD;&#xA;  }&#xD;&#xA;&#xD;&#xA;  function showDeadlineMessage(event) {&#xD;&#xA;    const container = document.getElementById(&#34;playerSelections&#34;);&#xD;&#xA;    container.innerHTML = `&#xD;&#xA;      &lt;div class=&#34;deadline-message error-message&#34;&gt;&#xD;&#xA;        &lt;h3&gt;Team Creation Closed&lt;/h3&gt;&#xD;&#xA;        &lt;p&gt;The deadline for creating teams for &lt;strong&gt;${event.name}&lt;/strong&gt; has passed.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
